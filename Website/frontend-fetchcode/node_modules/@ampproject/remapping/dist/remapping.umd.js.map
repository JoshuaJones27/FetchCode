onst b=ug();b&&("number"===typeof a&&(a=[a]),oa(a,c=>{b.unsubscribeByKey(c);delete pg[c]}))}
function ug(){return v("ytPubsub2Pubsub2Instance")}
;function Bg(a,b){let c;return()=>{c||(c=new Cg(a,b));return c}}
var Cg=class extends Xf{constructor(a,b){super(a,b);this.options=b;ff(a)}l(a,b,c={}){return(this.options.ia?ig:hg)(a,b,Object.assign({},c))}delete(a={}){return(this.options.ia?kg:jg)(this.name,a)}};const Dg=["client.name","client.version"];function Eg(a){if(!a.errorMetadata||!a.errorMetadata.kvPairs)return a;a.errorMetadata.kvPairs=a.errorMetadata.kvPairs.filter(b=>b.key?Dg.includes(b.key):!1);
return a}
;var Fg;Fg=Bg("ServiceWorkerLogsDatabase",{P:{SWHealthLog:{T:1}},ia:!0,upgrade:(a,b)=>{b(1)&&Ff(a,"SWHealthLog",{keyPath:"id",autoIncrement:!0}).i.createIndex("swHealthNewRequest",["interface","timestamp"],{unique:!1})},
version:1});function Gg(a,b){return r(function*(){var c=yield Wf(Fg(),b),d=P("INNERTUBE_CONTEXT_CLIENT_NAME",0);const e=Object.assign({},a);e.clientError&&(e.clientError=Eg(e.clientError));e.interface=d;return Hf(c,"SWHealthLog",e)})}
;const Hg=u.ytNetworklessLoggingInitializationOptions||{isNwlInitialized:!1,potentialEsfErrorCounter:0};w("ytNetworklessLoggingInitializationOptions",Hg);function Ig(a){!a.config_&&Ne()&&(a.config_=Oe());return!!a.config_}
function Jg(a,b,c){!P("VISITOR_DATA")&&.01>Math.random()&&ze(new df("Missing VISITOR_DATA when sending innertube request.","log_event",b,c));if(!Ig(a))throw a=new df("innertube xhrclient not ready","log_event",b,c),ye(a),a;const d={headers:c.headers||{},method:"POST",postParams:b,postBody:c.postBody,postBodyFormat:c.postBodyFormat||"JSON",onTimeout:()=>{c.onTimeout()},
onFetchTimeout:c.onTimeout,onSuccess:(m,p)=>{if(c.onSuccess)c.onSuccess(p)},
onFetchSuccess:m=>{if(c.onSuccess)c.onSuccess(m)},
onError:(m,p)=>{if(c.onError)c.onError(p)},
onFetchError:m=>{if(c.onError)c.onError(m)},
timeout:c.timeout,withCredentials:!0};d.headers["Content-Type"]||(d.headers["Content-Type"]="application/json");b="";var e=a.config_.Da;e&&(b=e);e=Se(a.config_.Fa||!1,b,c);Object.assign(d.headers,e);(e=d.headers.Authorization)&&!b&&(d.headers["x-origin"]=window.location.origin);const f=`/${"youtubei"}/${a.config_.innertubeApiVersion}/${"log_event"}`;let g={alt:"json"},h=a.config_.Ea&&e;h=h&&e.startsWith("Bearer");h||(g.key=a.config_.innertubeApiKey);const k=Ge(`${b}${f}`,g||{},!0),l=()=>{try{Ke(k,
d)}catch(m){if("InvalidAccessError"==m.name)ze(Error("An extension is blocking network request."));else throw m;}};
!Q("use_new_nwl")&&v("ytNetworklessLoggingInitializationOptions")&&Hg.isNwlInitialized?dg().then(m=>{l(m)}):l(!1)}
class Kg{constructor(a){this.config_=null;a?this.config_=a:Ne()&&(this.config_=Oe())}};let Lg=0;w("ytDomDomGetNextId",v("ytDomDomGetNextId")||(()=>++Lg));w("ytEventsEventsListeners",u.ytEventsEventsListeners||{});w("ytEventsEventsCounter",u.ytEventsEventsCounter||{count:0});function Mg(){const a=v("_lact",window);var b;null==a?b=-1:b=Math.max(Date.now()-a,0);return b}
;u.ytPubsubPubsubInstance||new L;const Ng=u.window;Ng.ytExports||(Ng.ytExports={logging:{transport:{leaderQueueLength:0,leaderChosen:!1}}});const Og=se("initial_gel_batch_timeout",2E3),Pg=Math.pow(2,16)-1;let Qg=!1,U=void 0;class Rg{constructor(){this.l=this.i=this.j=0}}const Sg=new Rg,Tg=new Rg;let Ug=!0;const Vg=u.ytLoggingTransportGELQueue_||new Map,Wg=new Map,Xg=u.ytLoggingTransportGELProtoQueue_||new Map,Yg=u.ytLoggingTransportTokensToCttTargetIds_||{},Zg=u.ytLoggingTransportTokensToJspbCttTargetIds_||{};
function $g(){Q("jspb_with_transport_leader")&&!Ng.ytExports.logging.transport.leaderChosen&&(Qg=Ng.ytExports.logging.transport.leaderChosen=!0,document.addEventListener("FLUSH_REQUEST",()=>{ah(void 0,void 0,!0)}))}
function bh(a,b){$g();if("log_event"===a.endpoint){var c=ch(a),d=Vg.get(c)||[];Vg.set(c,d);d.push(a.payload);dh(b,d,c)}}
function eh(a,b){$g();if("log_event"===a.endpoint){var c=ch(a,!0);if(Q("jspb_with_transport_leader")&&Qg){var d=Wg.get(c)||[];Wg.set(c,d);Ng.ytExports.logging.transport.leaderQueueLength++;d.push(a.payload);dh(b,d,c,!0)}else d=Xg.get(c)||[],Xg.set(c,d),a=a.payload.toJSON(),d.push(a),dh(b,d,c,!0)}}
function dh(a,b,c,d=!1){a&&(U=new a);a=se("tvhtml5_logging_max_batch")||se("web_logging_max_batch")||100;const e=R(),f=d?Tg.l:Sg.l,g=Xg.get(c)||[];Q("jspb_with_transport_leader")&&(Qg&&b.length+g.length>=a||!Qg&&Ng.ytExports.logging.transport.leaderQueueLength+b.length>=a)||b.length>=a?ah({writeThenSend:!0},Q("flush_only_full_queue")?c:void 0,d):10<=e-f&&(fh(d),d?Tg.l=e:Sg.l=e)}
function gh(a,b){$g();if("log_event"===a.endpoint){var c=ch(a),d=new Map;d.set(c,[a.payload]);b&&(U=new b);return new K((e,f)=>{U&&Ig(U)?hh(d,e,f,{bypassNetworkless:!0},!0):e()})}}
function ih(a,b){$g();if("log_event"===a.endpoint){var c=ch(a,!0),d=new Map,e=new Map;Q("jspb_with_transport_leader")&&Qg?e.set(c,[a.payload]):d.set(c,[a.payload.toJSON()]);b&&(U=new b);return new K(f=>{U&&Ig(U)?jh(d,e,f,{bypassNetworkless:!0},!0):f()})}}
function ch(a,b=!1){var c="";if(a.O)c="visitorOnlyApprovedKey";else if(a.cttAuthInfo){if(b){b=a.cttAuthInfo.token;c=a.cttAuthInfo;const d=new fe;c.videoId?d.setVideoId(c.videoId):c.playlistId&&Bb(d,2,ee,c.playlistId);Zg[b]=d}else b=a.cttAuthInfo,c={},b.videoId?c.videoId=b.videoId:b.playlistId&&(c.playlistId=b.playlistId),Yg[a.cttAuthInfo.token]=c;c=a.cttAuthInfo.token}return c}
function ah(a={},b,c=!1){new K((d,e)=>{c?(window.clearTimeout(Tg.j),window.clearTimeout(Tg.i),Tg.i=0):(window.clearTimeout(Sg.j),window.clearTimeout(Sg.i),Sg.i=0);if(Q("jspb_with_transport_leader")&&!Qg)document.dispatchEvent(new CustomEvent("FLUSH_REQUEST")),d();else if(U&&Ig(U))if(void 0!==b)if(c){e=new Map;var f=new Map,g=Xg.get(b)||[];e.set(b,g);Q("jspb_with_transport_leader")&&(g=Wg.get(b)||[],f.set(b,g));jh(e,f,d,a);Q("jspb_with_transport_leader")&&Wg.delete(b);Xg.delete(b)}else f=new Map,g=
Vg.get(b)||[],f.set(b,g),hh(f,d,e,a),Vg.delete(b);else c?(jh(Xg,Wg,d,a),Xg.clear()):(hh(Vg,d,e,a),Vg.clear());else fh(c),d()})}
function fh(a=!1){if(Q("web_gel_