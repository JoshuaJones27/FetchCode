.options);
Ds(e,d).then(function(m){e.id=m;f&&Fs(e.id,d)}).catch(function(m){Vs(m)})}else Ts(a,b)}
b=void 0===b?{}:b;g.Q("skip_is_supported_killswitch")?g.ls().then(function(d){c(d)}):c(ks())};
ypa=function(){var a=ks();if(!a)throw g.Kr("throttleSend");Ys||(Ys=g.Bn.Yg(function(){var b;return g.B(function(c){if(1==c.j)return g.A(c,apa("NEW",a),2);if(3!=c.j)return b=c.u,b?g.A(c,Us(b),3):(g.Bn.zj(Ys),Ys=0,c.return());Ys&&(Ys=0,ypa());g.va(c)})},100))};
Us=function(a){var b,c,d;return g.B(function(e){switch(e.j){case 1:b=ks();if(!b)throw c=g.Kr("immediateSend"),c;if(void 0===a.id){e.Ra(2);break}return g.A(e,bpa(a.id,b),3);case 3:(d=e.u)?a=d:Xp(Error("The request cannot be found in the database."));case 2:var f=a.timestamp;if(!(2592E6<=(0,g.R)()-f)){e.Ra(4);break}Xp(Error("Networkless Logging: Stored logs request expired age limit"));if(void 0===a.id){e.Ra(5);break}return g.A(e,Fs(a.id,b),5);case 5:return e.return();case 4:a.skipRetry||(a=zpa(a));
f=a;var h,l;if(null==f?0:null==(h=f.options)?0:null==(l=h.postParams)?0:l.requestTimeMs)f.options.postParams.requestTimeMs=Math.round((0,g.R)());a=f;if(!a){e.Ra(0);break}if(!a.skipRetry||void 0===a.id){e.Ra(8);break}return g.A(e,Fs(a.id,b),8);case 8:Ts(a.url,a.options,!!a.skipRetry),g.va(e)}})};
zpa=function(a){var b=ks();if(!b)throw g.Kr("updateRequestHandlers");var c=a.options.onError?a.options.onError:function(){};
a.options.onError=function(e,f){var h,l,m;return g.B(function(n){switch(n.j){case 1:g.Q("use_cfr_monitor")&&Js().requestComplete(a.url,!1);h=Voa(f);if(!(g.Q("nwl_consider_error_code")&&h||!g.Q("nwl_consider_error_code")&&Apa()<=g.Rp("potential_esf_error_limit",10))){n.Ra(2);break}if(g.Q("skip_checking_network_on_cfr_failure")&&(!g.Q("skip_checking_network_on_cfr_failure")||Js().isEndpointCFR(a.url))){n.Ra(3);break}return g.A(n,Rs().uo(),3);case 3:if(Rs().tf()){n.Ra(2);break}c(e,f);if(!g.Q("nwl_consider_error_code")||
void 0===(null==(l=a)?void 0:l.id)){n.Ra(6);break}return g.A(n,Es(a.id,b,!1),6);case 6:return n.return();case 2:if(g.Q("nwl_consider_error_code")&&!h&&Apa()>g.Rp("potential_esf_error_limit",10))return n.return();g.La("ytNetworklessLoggingInitializationOptions")&&Zs.potentialEsfErrorCounter++;$s++;if(void 0===(null==(m=a)?void 0:m.id)){n.Ra(8);break}return 1>a.sendCount?g.A(n,Es(a.id,b),12):g.A(n,Fs(a.id,b),8);case 12:g.Bn.Yg(function(){Rs().tf()&&ypa()},5E3);
case 8:c(e,f),g.va(n)}})};
var d=a.options.onSuccess?a.options.onSuccess:function(){};
a.options.onSuccess=function(e,f){var h;return g.B(function(l){if(1==l.j)return g.Q("use_cfr_monitor")&&Js().requestComplete(a.url,!0),void 0===(null==(h=a)?void 0:h.id)?l.Ra(2):g.A(l,Fs(a.id,b),2);g.Q("vss_network_hint")&&Rs().Un(!0);d(e,f);g.va(l)})};
return a};
Rs=function(){if(g.Q("use_new_nwl"))return tpa();at||(at=new g.Ns({ZO:!0,rN:!0}));return at};
Vs=function(a){Rs().tf()?g.Vp(a):lpa(a)};
Ts=function(a,b,c){c&&0===Object.keys(b).length?g.Gs(a):g.pq(a,b)};
Ss=function(){return g.La("ytNetworklessLoggingInitializationOptions")?Zs.isNwlInitialized:!1};
Apa=function(){return g.La("ytNetworklessLoggingInitializationOptions")?Zs.potentialEsfErrorCounter:$s};
g.bt=function(a){this.config_=null;a?this.config_=a:Rna()&&(this.config_=g.gr())};
g.ct=function(a,b,c,d){function e(p){try{(void 0===p?0:p)&&d.retry&&!d.rP.bypassNetworkless?(f.method="POST",d.rP.writeThenSend?g.Q("use_new_nwl_wts")?Ps().writeThenSend(n,f):xpa(n,f):g.Q("use_new_nwl_saw")?Ps().sendAndWrite(n,f):Xs(n,f)):(f.method="POST",f.postParams||(f.postParams={}),g.pq(n,f))}catch(q){if("InvalidAccessError"==q.name)Xp(Error("An extension is blocking network request."));else throw q;}}
!g.P("VISITOR_DATA")&&"visitor_id"!==b&&.01>Math.random()&&Xp(new g.Ar("Missing VISITOR_DATA when sending innertube request.",b,c,d));if(!a.isReady())throw a=new g.Ar("innertube xhrclient not ready",b,c,d),g.Vp(a),a;var f={headers:d.headers||{},method:"POST",postParams:c,postBody:d.postBody,postBodyFormat:d.postBodyFormat||"JSON",onTimeout:function(){d.onTimeout()},
onFetchTimeout:d.onTimeout,onSuccess:function(p,q){if(d.onSuccess)d.onSuccess(q)},
onFetchSuccess:function(p){if(d.onSuccess)d.onSuccess(p)},
onError:function(p,q){if(d.onError)d.onError(q)},
onFetchError:function(p){if(d.onError)d.onError(p)},
timeout:d.timeout,withCredentials:!0};f.headers["Content-Type"]||(f.headers["Content-Type"]="application/json");c="";var h=a.config_.wO;h&&(c=h);h=$na(a.config_.xO||!1,c,d);Object.assign(f.headers,h);(h=f.headers.Authorization)&&!c&&(f.headers["x-origin"]=window.location.origin);b="/youtubei/"+a.config_.innertubeApiVersion+"/"+b;var l={alt:"json"},m=a.config_.pH&&h;m=m&&h.startsWith("Bearer");m||(l.key=a.config_.innertubeApiKey);var n=cq(""+c+b,l);g.Q("use_new_nwl")&&Ps().Se||!g.Q("use_new_nwl")&&
Ss()?Ioa().then(function(p){e(p)}):e(!1)};
Bpa=function(){var a=document;if("visibilityState"in a)return a.visibilityState;var b=dt+"VisibilityState";if(b in a)return a[b]};
et=function(a,b){var c;pl(a,function(d){c=b[d];return!!c});
return c};
ft=function(a){this.type="";this.state=this.source=this.data=this.currentTarget=this.relatedTarget=this.target=null;this.charCode=this.keyCode=0;this.metaKey=this.shiftKey=this.ctrlKey=this.altKey=!1;this.rotation=this.clientY=this.clientX=0;this.scale=1;this.changedTouches=this.touches=null;try{if(a=a||window.event){this.event=a;for(var b in a)b in Cpa||(this[b]=a[b]);this.scale=a.scale;this.rotation=a.rotation;var c=a.target||a.srcElement;c&&3==c.nodeType&&(c=c.parentNode);this.target=c;var d=a.relatedTarget;
if(d)try{d=d.nodeName?d:null}catch(e){d=null}else"mouseover"==this.type?d=a.fromElement:"mouseout"==this.type&&(d=a.toElement);this.relatedTarget=d;this.clientX=void 0!=a.clientX?a.clientX:a.pageX;this.clientY=void 0!=a.clientY?a.clientY:a.pageY;this.keyCode=a.keyCode?a.keyCode:a.which;this.charCode=a.charCode||("keypress"==this.type?this.keyCode:0);this.altKey=a.altKey;this.ctrlKey=a.ctrlKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.j=a.pageX;this.u=a.pageY}}catch(e){}};
Dpa=function(a){if(document.body&&document.documentElement){var b=document.body.scrollTop+document.documentElement.scrollTop;a.j=a.clientX+(document.body.scrollLeft+document.documentElement.scrollLeft);a.u=a.clientY+b}};
Epa=function(a,b,c,d){d=void 0===d?{}:d;a.addEventListener&&("mouseenter"!=b||"onmouseenter"in document?"mouseleave"!=b||"onmouseenter"in document?"mousewheel"==b&&"MozBoxSizing"in document.documentElement.style&&(b="MozMousePixelScroll"):b="mouseout":b="mouseover");return Re(gt,function(e){var f="boolean"===typeof e[4]&&e[4]==!!d,h=g.Pa(e[4])&&g.Pa(d)&&g.Ve(e[4],d);return!!e.length&&e[0]==a&&e[1]==b&&e[2]==c&&(f||h)})};
g.ht=function(a,b,c,d){d=void 0===d?{}:d;if(!a||!a.addEventListener&&!a.attachEvent)return"";var e=Epa(a,b,c,d);if(e)return e;e=++Fpa.count+"";var f=!("mouseenter"!=b&&"mouseleave"!=b||!a.addEventListener||"onmouseenter"in document);var h=f?function(l){l=new ft(l);if(!Ig(l.relatedTarget,function(m){return m==a},!0))return l.currentTarget=a,l.type=b,c.call(a,l)}:function(l){l=new ft(l);
l.currentTarget=a;return c.call(a,l)};
h=Wp(h);a.addEventListener?("mouseenter"==b&&f?b="mouseover":"mouseleave"==b&&f?b="mouseout":"mousewheel"==b&&"MozBoxSizing"in document.documentElement.style&&(b="MozMousePixelScroll"),Gpa()||"boolean"===typeof d?a.addEventListener(b,h,d):a.addEventListener(b,h,!!d.capture)):a.attachEvent("on"+b,h);gt[e]=[a,b,c,h,d];return e};
Hpa=function(a,b){var c=document.body||document;return g.ht(c,"click",function(d){var e=Ig(d.target,function(f){return f===c||b(f)},!0);
e&&e!==c&&!e.disabled&&(d.currentTarget=e,a.call(e,d))})};
g.jt=function(a){a&&("string"==typeof a&&(a=[a]),g.qc(a,function(b){if(b in gt){var c=gt[b],d=c[0],e=c[1],f=c[3];c=c[4];d.removeEventListener?Gpa()||"boolean"===typeof c?d.removeEventListener(e,f,c):d.removeEventListener(e,f,!!c.capture):d.detachEvent&&d.detachEvent("on"+e,f);delete gt[b]}}))};
g.kt=function(a){a=a||window.event;a=a.target||a.srcElement;3==a.nodeType&&(a=a.parentNode);return a};
lt=function(a){a=a||window.event;var b;a.composedPath&&"function"===typeof a.composedPath?b=a.composedPath():b=a.path;return b&&b.length?b[0]:g.kt(a)};
mt=function(a){a=a||window.event;var b=a.relatedTarget;b||("mouseover"==a.type?b=a.fromElement:"mouseout"==a.type&&(b=a.toElement));return b};
nt=function(a){a=a||window.event;var b=a.pageX,c=a.pageY;document.body&&document.documentElement&&("number"!==typeof b&&(b=a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft),"number"!==typeof c&&(c=a.clientY+document.body.scrollTop+document.documentElement.scrollTop));return new g.ag(b,c)};
g.ot=function(a){a=a||window.event;a.returnValue=!1;a.preventDefault&&a.preventDefault()};
g.pt=function(a){a=a||window.event;return!1===a.returnValue||a.CO&&a.CO()};
g.qt=function(a){a=a||window.event;return a.keyCode?a.keyCode:a.which};
Ipa=function(a){return Hpa(a,function(b){return g.eo(b,"ytp-ad-has-logging-urls")})};
g.Jpa=function(a,b,c){var d=void 0===d?{}:d;var e;return e=g.ht(a,b,function(){g.jt(e);c.apply(a,arguments)},d)};
rt=function(a){for(var b in gt)gt[b][0]==a&&g.jt(b)};
tt=function(a){this.J=a;this.j=null;this.C=0;this.I=null;this.D=0;this.u=[];for(a=0;4>a;a++)this.u.push(0);this.B=0;this.Y=g.ht(window,"mousemove",(0,g.Sa)(this.V,this));this.N=g.lq((0,g.Sa)(this.W,this),25)};
Kpa=function(){var a={},b=void 0===a.X_?!1:a.X_;a=void 0===a.QV?!0:a.QV;if(null==g.La("_lact",window)){var c=parseInt(g.P("LACT"),10);c=isFinite(c)?Date.now()-Math.max(c,0):-1;g.Ka("_lact",c,window);g.Ka("_fact",c,window);-1==c&&ut();g.ht(document,"keydown",ut);g.ht(document,"keyup",ut);g.ht(document,"mousedown",ut);g.ht(document,"mouseup",ut);b?g.ht(window,"touchmove",function(){vt("touchmove",200)},{passive:!0}):(g.ht(window,"resize",function(){vt("resize",200)}),a&&g.ht(window,"scroll",function(){vt("scroll",
200)}));
new tt(function(){vt("mouse",100)});
g.ht(document,"touchstart",ut,{passive:!0});g.ht(document,"touchend",ut,{passive:!0})}};
vt=function(a,b){wt[a]||(wt[a]=!0,g.Bn.Yg(function(){ut();wt[a]=!1},b))};
ut=function(){null==g.La("_lact",window)&&(Kpa(),g.La("_lact",window));var a=Date.now();g.Ka("_lact",a,window);-1==g.La("_fact",window)&&g.Ka("_fact",a,window);(a=g.La("ytglobal.ytUtilActivityCallback_"))&&a()};
xt=function(){var a=g.La("_lact",window);return null==a?-1:Math.max(Date.now()-a,0)};
g.Dt=function(a,b,c){var d=g.zt();if(d&&b){var e=d.subscribe(a,function(){var f=arguments;var h=function(){At[e]&&b.apply&&"function"==typeof b.apply&&b.apply(c||window,f)};
try{g.Bt[a]?h():g.kq(h,0)}catch(l){g.Vp(l)}},c);
At[e]=!0;Ct[a]||(Ct[a]=[]);Ct[a].push(e);return e}return 0};
g.Et=function(a){var b=g.zt();b&&("number"===typeof a?a=[a]:"string"===typeof a&&(a=[parseInt(a,10)]),g.qc(a,function(c){b.unsubscribeByKey(c);delete At[c]}))};
g.Ft=function(a,b){var c=g.zt();return c?c.publish.apply(c,arguments):!1};
Mpa=function(a){var b=g.zt();if(b)if(b.clear(a),a)Lpa(a);else for(var c in Ct)Lpa(c)};
g.zt=function(){return g.C.ytPubsubPubsubInstance};
Lpa=function(a){Ct[a]&&(a=Ct[a],g.qc(a,function(b){At[b]&&delete At[b]}),a.length=0)};
Npa=function(){this.B=this.j=this.u=0};
Jt=function(){g.Q("jspb_with_transport_leader")&&!Gt.ytExports.logging.transport.leaderChosen&&(Ht=Gt.ytExports.logging.transport.leaderChosen=!0,document.addEventListener("FLUSH_REQUEST",function(){It(void 0,void 0,!0)}))};
Opa=function(a,b){Jt();if("log_event"===a.endpoint){var c=Kt(a),d=Lt.get(c)||[];Lt.set(c,d);d.push(a.payload);Mt(b,d,c)}};
Ppa=function(a,b){Jt();if("log_event"===a.endpoint){var c=Kt(a,!0);if(g.Q("jspb_with_transport_leader")&&Ht){var d=Nt.get(c)||[];Nt.set(c,d);Gt.ytExports.logging.transport.leaderQueueLength++;d.push(a.payload);Mt(b,d,c,!0)}else d=Ot.get(c)||[],Ot.set(c,d),a=a.payload.toJSON(),d.push(a),Mt(b,d,c,!0)}};
Mt=function(a,b,c,d){d=void 0===d?!1:d;a&&(Pt=new a);a=g.Rp("tvhtml5_logging_max_batch")||g.Rp("web_logging_max_batch")||100;var e=(0,g.R)(),f=d?Qt.B:Rt.B,h=Ot.get(c)||[];g.Q("jspb_with_transport_leader")&&(Ht&&b.length+h.length>=a||!Ht&&Gt.ytExports.logging.transport.leaderQueueLength+b.length>=a)||b.length>=a?It({writeThenSend:!0},g.Q("flush_only_full_queue")?c:void 0,d):10<=e-f&&(Qpa(d),d?Qt.B=e:Rt.B=e)};
Rpa=function(a,b){Jt();if("log_event"===a.endpoint){var c=Kt(a),d=new Map;d.set(c,[a.payload]);b&&(Pt=new b);return new g.Sg(function(e,f){Pt&&Pt.isReady()?St(d,e,f,{bypassNetworkless:!0},!0):e()})}};
Spa=function(a,b){Jt();if("log_event"===a.endpoint){var c=Kt(a,!0),d=new Map,e=new Map;g.Q("jspb_with_transport_leader")&&Ht?e.set(c,[a.payload]):d.set(c,[a.payload.toJSON()]);b&&(Pt=new b);return new g.Sg(function(f){Pt&&Pt.isReady()?Tt(d,e,f,{bypassNetworkless:!0},!0):f()})}};
Kt=function(a,b){var c="";if(a.yx)c="visitorOnlyApprovedKey";else if(a.cttAuthInfo){if(void 0===b?0:b){b=a.cttAuthInfo.token;c=a.cttAuthInfo;var d=new Mp;c.videoId?d.setVideoId(c.videoId):c.playlistId&&g.td(d,2,Ut,c.playlistId);Vt[b]=d}else b=a.cttAuthInfo,c={},b.videoId?c.videoId=b.videoId:b.playlistId&&(c.playlistId=b.playlistId),Wt[a.cttAuthInfo.token]=c;c=a.cttAuthInfo.token}return c};
It=function(a,b,c){a=void 0===a?{}:a;c=void 0===c?!1:c;new g.Sg(function(d,e){c?(g.mq(Qt.u),g.mq(Qt.j),Qt.j=0):(g.mq(Rt.u),g.mq(Rt.j),Rt.j=0);if(g.Q("jspb_with_transport_leader")&&!Ht)document.dispatchEvent(new CustomEvent("FLUSH_REQUEST")),d();else if(Pt&&Pt.isReady())if(void 0!==b)if(c){e=new Map;var f=new Map,h=Ot.get(b)||[];e.set(b,h);g.Q("jspb_with_transport_leader")&&(h=Nt.get(b)||[],f.set(b,h));Tt(e,f,d,a);g.Q("jspb_with_transport_leader")&&Nt.delete(b);Ot.delete(b)}else f=new Map,h=Lt.get(b)||
[],f.set(b,h),St(f,d,e,a),Lt.delete(b);else c?(Tt(Ot,Nt,d,a),Ot.clear()):(St(Lt,d,e,a),Lt.clear());else Qpa(c),d()})};
Qpa=function(a){a=void 0===a?!1:a;if(g.Q("web_gel_timeout_cap")&&(!a&&!Rt.j||a&&!Qt.j)){var b=g.kq(function(){It({writeThenSend:!0},void 0,a)},6E4);
a?Qt.j=b:Rt.j=b}g.mq(a?Qt.u:Rt.u);b=g.P("LOGGING_BATCH_TIMEOUT",g.Rp("web_gel_debounce_ms",1E4));g.Q("shorten_initial_gel_batch_timeout")&&Xt&&(b=Tpa);b=g.kq(function(){It({writeThenSend:!0},void 0,a)},b);
a?Qt.u=b:Rt.u=b};
St=function(a,b,c,d,e){var f=Pt;d=void 0===d?{}:d;var h=Math.round((0,g.R)()),l=a.size;a=g.r(a);for(var m=a.next();!m.done;m=a.next()){var n=g.r(m.value);m=n.next().value;var p=n.next().value;n=m;m=g.Xe({context:g.hr(f.config_||g.gr())});m.events=p;(p=Wt[n])&&Upa(m,n,p);delete Wt[n];n="visitorOnlyApprovedKey"===n;Vpa(m,h,n);Wpa(d);p=function(){l--;l||b()};
var q=function(){l--;l||b()};
try{g.ct(f,"log_event",m,Xpa(d,n,p,q,e)),Xt=!1}catch(t){g.Vp(t),c()}}};
Tt=function(a,b,c,d,e){var f=Pt;d=void 0===d?{}:d;var h=Math.round((0,g.R)()),l=a.size+b.size,m=new Map([].concat(g.v(a),g.v(b)));m=g.r(m);for(var n=m.next();!n.done;n=m.next()){var p=g.r(n.value).next().value,q=a.get(p),t=b.get(p)||[];n=new Np;var u=Wna(f.config_||g.gr());wd(n,ep,1,u);q=q?Ypa(q):[];q=g.r(q);for(u=q.next();!u.done;u=q.next())Ad(n,3,Kp,u.value);t=g.r(t);for(q=t.next();!q.done;q=t.next())Ad(n,3,Kp,q.value);(t=Vt[p])&&Zpa(n,p,t);delete Vt[p];p="visitorOnlyApprovedKey"===p;$pa(n,h,p);
Wpa(d);n=Fd(n);p=Xpa(d,p,function(){Gt.ytExports.logging.transport.leaderQueueLength=0;l--;l||c()},function(){Gt.ytExports.logging.transport.leaderQueueLength=0;
l--;l||c()},e);
p.headers={"Content-Type":"application/json+protobuf"};p.postBodyFormat="JSPB";p.postBody=n;g.ct(f,"log_event","",p);Xt=!1}};
Wpa=function(a){g.Q("always_send_and_write")&&(a.writeThenSend=!1)};
Xpa=function(a,b,c,d,e){return{retry:!0,onSuccess:c,onError:d,rP:a,yx:b,Jja:!!e,headers:{},postBodyFormat:"",postBody:""}};
Vpa=function(a,b,c){a.requestTimeMs=String(b);g.Q("unsplit_gel_payloads_in_logs")&&(a.unsplitGelPayloadsInLogs=!0);!c&&(b=g.P("EVENT_ID"))&&(c=aqa(),a.serializedClientEventId={serializedEventId:b,clientCounter:String(c)})};
$pa=function(a,b,c){g.E(a,2,b);if(!c&&(b=g.P("EVENT_ID"))){c=aqa();var d=new Lp;g.E(d,1,b);g.E(d,2,c);wd(a,Lp,5,d)}};
aqa=function(){var a=g.P("BATCH_CLIENT_COUNTER")||0;a||(a=Math.floor(Math.random()*bqa/2));a++;a>bqa&&(a=1);Pp("BATCH_CLIENT_COUNTER",a);return a};
Upa=function(a,b,c){if(c.videoId)var d="VIDEO";else if(c.playlistId)d="PLAYLIST";else return;a.credentialTransferTokenTargetId=c;a.context=a.context||{};a.context.user=a.context.u